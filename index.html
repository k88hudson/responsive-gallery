<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title></title>
	<meta name="description" content="">
	<meta name="author" content="">

	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />	
	<style>
	body {background:#000; color:#FFF;}

	a, a:visited { color: #FFF; }

	#container {
		opacity: 0;
		width: 320px;
	}

	#container, .element, .big {
		-webkit-transition: all 0.5s ease;
		-moz-transition: all 0.5s ease;
		-ms-transition: all 0.5s ease;
		-o-transition: all 0.5s ease;
		transition: all 0.5s ease;
	}
	.isotope,
	.isotope .isotope-item {
	  /* change duration value to whatever you like */
	  -webkit-transition-duration: 0.5s;
	     -moz-transition-duration: 0.5s;
	      -ms-transition-duration: 0.5s;
	       -o-transition-duration: 0.5s;
	          transition-duration: 0.5s;
	}

	.isotope {
	  -webkit-transition-property: height, width;
	     -moz-transition-property: height, width;
	      -ms-transition-property: height, width;
	       -o-transition-property: height, width;
	          transition-property: height, width;
	}

	.isotope .isotope-item {
	  -webkit-transition-property: -webkit-transform, opacity;
	     -moz-transition-property:    -moz-transform, opacity;
	      -ms-transition-property:     -ms-transform, opacity;
	       -o-transition-property:         top, left, opacity;
	          transition-property:         transform, opacity;
	}

		.element {
			height: 100px;
			width: 100px;
			margin: 1px;
		}
		.element.big {
			height: 200px;
			width: 200px;
		}
	</style>
	<script src="js/libs/modernizr-2.5.3-respond-1.1.0.min.js"></script>
</head>
<body>
<div data-role="header"> 
	<p><span class="title">Shake me</span>
	<a href="#" id="random" data-role="button">Random</a>
	<a href="#" id="rubiksA" data-role="button">Try</a>
	<a href="#" id="rubiksB" data-role="button">Try</a>
	</p>	
</div> 

<div role="main">
	<div id="container">
		<img data-row="0" data-col="0" id="swipe" class="element rubiksA" src="http://lorempixel.com/100/100/fashion">
		<img data-row="0" data-col="1" class="element rubiksA" src="http://lorempixel.com/100/100/sports">
		<img data-row="0" data-col="2" class="element rubiksA" src="http://lorempixel.com/100/100/people/1">
		<img data-row="1" data-col="0" class="element" src="http://lorempixel.com/100/100/people/2">
		<img data-row="1" data-col="1" class="element" src="http://lorempixel.com/100/100/people/3">
		<img data-row="1" data-col="2" class="element" src="http://lorempixel.com/100/100/people/4">
		<img data-row="2" data-col="0" class="element" src="http://lorempixel.com/100/100/people/5">
		<img data-row="2" data-col="1" class="element" src="http://lorempixel.com/100/100/people/6">
		<img data-row="2" data-col="2" class="element" src="http://lorempixel.com/100/100/nature">
	</div>
	
</div>
<footer>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
<script src="js/libs/jquery.isotope.min.js"></script>
<script src="js/libs/gshake.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<!--<script src="js/libs/jgestures.js"></script>-->
<script>
	window.scroll = 0;
    document.addEventListener("DOMContentLoaded", function(){
    	$.mobile.loadPage.defaults.showLoadMsg = false;

      	var $container = $('#container')	
      	var snd = new Audio("ding.mp3");
      	snd.preload = true;

	    $container.imagesLoaded( function(){		
		    $container.isotope({
	      		getSortData : {
					  number : function ( $elem ) {
					    return ( parseInt($elem.attr("data-row"))*3 + parseInt($elem.attr("data-col")) );
					  }
				},
		        itemSelector: '.element'
		    }).css("opacity", 1);
		});

  
      	//$(".element").bind('scrollstart', function(e){ e.preventDefault(); }, false); 
      	$("[data-row='0']").bind( "swiperight", shift({row:0}) );
      	$("[data-row='1']").bind( "swiperight", shift({row:1}) );
      	$("[data-row='2']").bind( "swiperight", shift({row:2}) );
      	/*
      	$("[data-col='0']").bind( "scrollstart", shift({col:0}) );
      	$("[data-col='1']").bind( "scrollstart", shift({col:1}) );
      	$("[data-col='2']").bind( "scrollstart", shift({col:2}) );
		*/

      	$("#rubiksA").click( shift({row:0}) );
      	$("#rubiksB").click( shift({col:0}) );

      	function shift( args ) {
      		var fn,
      			row = args.row || 0;
      			col = args.col || 0;

      		fn = function() {

      			var $items;
	      		( args.row !== undefined ) && ( $items = $("[data-row='"+row+"']") );
	      		( args.col !== undefined ) && ( $items = $("[data-col='"+col+"']") );

	      		$newItem = $('<img class="element" data-row="'+row+'" data-col="'+col+'" src="http://lorempixel.com/100/100/fashion">');
	      		$items.each(function(i, item){
	      			( args.row !==undefined ) && $(item).attr({
	      				"data-col" : parseInt($(item).attr("data-col")) + 1,
	      			});
	      			( args.col !==undefined ) && $(item).attr({
	      				"data-row" : parseInt($(item).attr("data-row")) + 1,
	      			});
	      		});
	      		$($items[2]).remove();
	      		$container.prepend( $newItem) .isotope( 'reloadItems' ).isotope({ sortBy: 'number' });
	      		$newItem.bind( "swiperight", shift({"row" : row }) );
	      		
	  			$container.isotope("reloadItems").isotope({ 
	    			sortBy : "number" 
				});
	      	}

      		return fn;
      	}

    	$("#random").click(function() { 
    		snd.src = snd.src
    		snd.play();

    		$container.isotope('shuffle');
    	});

       $(this).gShake(function() { 
        	$container.isotope('shuffle');
    	});
    }, false);
</script>
<script src="js/script.js"></script>
</body>
</html>
